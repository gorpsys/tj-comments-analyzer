# Парсер комментариев t-j.ru

Скрипт для сбора и анализа комментариев с сайта t-j.ru. Программа собирает комментарии пользователей, фильтрует их по различным критериям и сохраняет результаты в CSV файл.

## Функциональность

- Сбор комментариев пользователей через API t-j.ru
- Фильтрация комментариев по следующим критериям:
  - Только комментарии за последний год
  - Минимум 5 лайков и/или дизлайков в сумме
- Разделение комментариев на три группы:
  - Только с лайками
  - Только с дизлайками
  - С лайками и дизлайками
- Многопоточная обработка (до 10 потоков)
- Автоматическое прекращение сбора комментариев при достижении старых записей
- Сохранение результатов в CSV файл с временной меткой

## Требования

- Python 3.6+
- Зависимости:
  - requests
  - beautifulsoup4
  - pandas

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/tj-comments-analyzer.git
cd tj-comments-analyzer
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Использование

Запустите скрипт:
```bash
python main.py
```

Программа будет:
1. Собирать комментарии случайных пользователей
2. Фильтровать их по заданным критериям
3. Продолжать сбор, пока в каждой группе не будет минимум 5 комментариев
4. Сохранять результаты в CSV файл с именем вида `comments_YYYYMMDD_HHMMSS.csv`

## Структура CSV файла

CSV файл содержит следующие поля:
- id: ID комментария
- group: Группа комментария (only_likes/only_dislikes/both)
- likes: Количество лайков
- dislikes: Количество дизлайков
- user_vote: Голос пользователя
- status: Статус комментария
- ban: Флаг бана
- date_added: Дата добавления
- url: Ссылка на комментарий

## Оптимизации

- Многопоточная обработка для ускорения сбора данных
- Автоматическое прекращение сбора при достижении старых комментариев
- Пакетная обработка пользователей
- Паузы между запросами для предотвращения перегрузки сервера 